{% assign podcast = objects.podcast %}
{% assign settings = objects.settings %}
{% assign episode = objects.episode %}
{% layout 'theme' title: "All Episodes" %}

<section class="episodes-directory">
  <div class="container">
    <header class="episodes-header">
      <h1 class="page-title">All Episodes</h1>
      <p class="page-subtitle">Browse our complete collection of episodes</p>
    </header>

    <div class="episodes-grid">
      {% assign all_episodes = episode | where: "draft", false | sort: "order" | reverse %}
      {% for ep in all_episodes %}
      <div class="episode-card">
        <div class="episode-image">
          <img src="/images/episodes/episode-{{ ep.number }}-thumb.jpg" alt="{{ ep.title }}">
          <button class="play-button" onclick="playEpisode('{{ ep.audio_url }}', '{{ ep.title }}')">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M8 5v14l11-7z" />
            </svg>
          </button>
        </div>

        <div class="episode-content">
          <div class="episode-meta">
            <span class="episode-number">Episode {{ ep.number }}</span>
            <span class="episode-date">{{ ep.publish_date | date: "%b %d, %Y" }}</span>
          </div>

          <h3 class="episode-title">
            <a href="/episodes/{{ ep.slug }}.html">{{ ep.title }}</a>
          </h3>
          <p class="episode-description">{{ ep.description | strip_html | truncate: 200 }}</p>

          <div class="episode-footer">
            <div class="episode-tags">
              {% if ep.tag1 %}
              <span class="tag">{{ ep.tag1 }}</span>
              {% endif %}
              {% if ep.tag2 %}
              <span class="tag">{{ ep.tag2 }}</span>
              {% endif %}
            </div>
            <span class="episode-duration">{{ ep.duration }}</span>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>