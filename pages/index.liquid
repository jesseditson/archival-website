{% layout 'theme' active_page: "photos" %}

<!-- Photo gallery -->
<div class="photo-gallery" id="photo-gallery">
  {% for photo in photos %}
    {% if photo.file %}
      {% assign photo_src = photo.file.url | default: "#" %}
      <div class="photo-item" data-index="{{ forloop.index0 }}" data-src="{{ photo_src }}" data-title="{{ photo.title }}">
        <div class="photo-wrapper">
          <img src="{{ photo_src }}" alt="{{ photo.title }}" loading="lazy">
          <div class="photo-overlay">
            <span class="photo-title">{{ photo.title }}</span>
          </div>
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>

<!-- Enhanced Lightbox -->
<div id="lightbox" class="lightbox">
  <div class="lightbox-backdrop" onclick="closeLightbox()"></div>

  <button class="lightbox-close" onclick="closeLightbox()" aria-label="Close lightbox">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </button>

  <button class="lightbox-nav lightbox-prev" onclick="navigateLightbox(-1)" aria-label="Previous image">
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polyline points="15 18 9 12 15 6"></polyline>
    </svg>
  </button>

  <button class="lightbox-nav lightbox-next" onclick="navigateLightbox(1)" aria-label="Next image">
    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </button>

  <div class="lightbox-content">
    <img id="lightbox-img" src="" alt="">
    <div class="lightbox-loader">
      <div class="loader-spinner"></div>
    </div>
  </div>

  <div class="lightbox-info">
    <div class="lightbox-counter">
      <span id="lightbox-current">1</span> / <span id="lightbox-total">1</span>
    </div>
    <div class="lightbox-title" id="lightbox-title"></div>
  </div>

  <div class="lightbox-thumbnails-wrapper">
    <div class="lightbox-thumbnails" id="lightbox-thumbnails">
      <!-- Thumbnails will be generated by JavaScript -->
    </div>
  </div>

  <button class="lightbox-fullscreen" onclick="toggleFullscreen()" aria-label="Toggle fullscreen">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
    </svg>
  </button>
</div>
